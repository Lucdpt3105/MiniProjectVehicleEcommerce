-- ==============================================
-- THÊM TÀI KHOẢN EMPLOYEE VÀO HỆ THỐNG MINI_SHOP
-- ==============================================

-- Thêm tài khoản employee (username: employee, password: employee123)
-- Password đã được hash bằng password_hash() trong PHP
INSERT INTO users (username, email, password, full_name, role, created_at, updated_at) 
VALUES (
    'employee',
    'employee@minishop.com',
    '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi',  -- password: employee123
    'Sales Employee',
    'employee',
    NOW(),
    NOW()
);

-- Thêm thêm 1 tài khoản employee backup (username: emp2, password: emp123)
INSERT INTO users (username, email, password, full_name, role, created_at, updated_at) 
VALUES (
    'emp2',
    'emp2@minishop.com',
    '$2y$10$Q3VZ5qJZKqYzKZw4YxKZqO4YxKZqO4YxKZqO4YxKZqO4YxKZqO4YxK',  -- password: emp123
    'Employee 2',
    'employee',
    NOW(),
    NOW()
);

-- Cập nhật salesRepEmployeeNumber cho customers để gán cho employee
-- Lấy employee ID từ users table
SET @employee_id = (SELECT userID FROM users WHERE username = 'employee' AND role = 'employee' LIMIT 1);

-- Gán một số customers cho employee này
UPDATE customers 
SET salesRepEmployeeNumber = @employee_id 
WHERE customerNumber IN (103, 112, 114, 119, 121, 124, 125, 128, 129, 131, 141, 144, 145, 146, 148, 151, 157, 161, 166, 167, 171, 172, 173, 175, 177, 181, 186, 187, 189, 198, 201, 202, 204, 205, 210, 211, 213, 219, 223, 227, 233, 237, 242, 247, 250, 256, 260, 273, 276, 278, 282, 286, 293, 298, 303, 311, 314, 319, 320, 321, 323, 328, 333, 334, 335, 339, 344, 347, 350, 353, 357, 361, 362, 363, 369, 376, 379, 381, 382, 385, 386, 398, 406, 409, 412, 415, 424, 443, 447, 448, 450, 452, 455, 456, 458, 461, 480, 484, 486, 487, 489, 495, 496, 498, 504, 506, 509, 512, 519, 520, 521, 527, 535, 540, 544, 545, 546, 552, 555, 560, 566, 567, 571, 574, 577, 584, 586, 587, 594, 595, 597, 601, 603, 612, 615, 618, 620, 624, 627, 630, 633, 640, 643, 646, 649, 650, 651, 652, 656, 658, 659, 661, 664, 667, 669, 670, 671, 672, 673, 674, 675, 676, 677, 678, 679, 680, 681, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 693, 694, 695, 696, 697, 698, 699, 700, 701, 702, 703, 704, 705, 706, 707, 708, 709, 710, 711, 712, 713, 714, 715, 716, 717, 718, 719, 720, 721, 722, 723, 724, 725, 726, 727, 728, 729, 730, 731, 732, 733, 734, 735, 736, 737, 738, 739, 740, 741, 742, 743, 744, 745, 746, 747, 748, 749, 750, 751, 752, 753, 754, 755, 756, 757, 758, 759, 760, 761, 762, 763, 764, 765, 766, 767, 768, 769, 770, 771, 772, 773, 774, 775, 776, 777, 778, 779, 780, 781, 782, 783, 784, 785, 786, 787, 788, 789, 790, 791, 792, 793, 794, 795, 796, 797, 798, 799, 800, 801, 802, 803, 804, 805, 806, 807, 808, 809, 810, 811, 812, 813, 814, 815, 816, 817, 818, 819, 820, 821, 822, 823, 824, 825, 826, 827, 828, 829, 830, 831, 832, 833, 834, 835, 836, 837, 838, 839, 840, 841, 842, 843, 844, 845, 846, 847, 848, 849, 850, 851, 852, 853, 854, 855, 856, 857, 858, 859, 860, 861, 862, 863, 864, 865, 866, 867, 868, 869, 870, 871, 872, 873, 874, 875, 876, 877, 878, 879, 880, 881, 882, 883, 884, 885, 886, 887, 888, 889, 890, 891, 892, 893, 894, 895, 896, 897, 898, 899, 900, 901, 902, 903, 904, 905, 906, 907, 908, 909, 910, 911, 912, 913, 914, 915, 916, 917, 918, 919, 920, 921, 922, 923, 924, 925, 926, 927, 928, 929, 930, 931, 932, 933, 934, 935, 936, 937, 938, 939, 940, 941, 942, 943, 944, 945, 946, 947, 948, 949, 950, 951, 952, 953, 954, 955, 956, 957, 958, 959, 960, 961, 962, 963, 964, 965, 966, 967, 968, 969, 970, 971, 972, 973, 974, 975, 976, 977, 978, 979, 980, 981, 982, 983, 984, 985, 986, 987, 988, 989, 990, 991, 992, 993, 994, 995, 996, 997, 998, 999, 1000)
LIMIT 50;

-- Kiểm tra tài khoản vừa tạo
SELECT userID, username, email, full_name, role, created_at 
FROM users 
WHERE role = 'employee';

-- Kiểm tra customers được gán cho employee
SELECT COUNT(*) as assigned_customers 
FROM customers 
WHERE salesRepEmployeeNumber = @employee_id;
